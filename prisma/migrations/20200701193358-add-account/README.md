# Migration `20200701193358-add-account`

This migration has been generated by ducwings <ducjava@gmail.com> at 7/1/2020, 7:33:58 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."User" ADD COLUMN "lastReferer" text   ;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200627184613-add-account-and-email..20200701193358-add-account
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgres"
-  url = "***"
+  url      = env("DB_URL")
 }
 model Post {
   id        Int     @default(autoincrement()) @id
@@ -15,8 +15,17 @@
   author    User?   @relation(fields: [authorId], references: [id])
   authorId  Int?
 }
+model Account {
+  accountId String @unique
+  name String? @default("") @unique
+  apiKey     String @default(uuid())
+  ownerEmail String @unique
+  createdAt   DateTime  @default(now())
+  updatedAt   DateTime  @updatedAt
+}
+
 model User {
   accountId  String?   @default("N/A")
   id       Int     @default(autoincrement()) @id
   uuid     String  @default(uuid())
@@ -33,8 +42,11 @@
   picUrl   String?   @default("")
   loginCount  Int? @default(0)
   lastLogin   DateTime?
   lastIP      String?
+  lastUA      String?
+  lastReferer String?
+  lastLocation String?
   createdAt   DateTime  @default(now())
   updatedAt   DateTime  @updatedAt
   resetAt     DateTime?
   active   Boolean  @default(true)
```


