# Migration `20200627184613-add-account-and-email`

This migration has been generated by ducwings <ducjava@gmail.com> at 6/27/2020, 6:46:13 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
DROP INDEX "public"."User.email"

DROP INDEX "public"."User.username"

ALTER TABLE "public"."User" ADD COLUMN "accountAndEmail" text   ,
ALTER COLUMN "username" SET DEFAULT E'';

CREATE UNIQUE INDEX "User.accountAndEmail" ON "public"."User"("accountAndEmail")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200627125449-add-access-token-username..20200627184613-add-account-and-email
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgres"
-  url = "***"
+  url      = env("DB_URL")
 }
 model Post {
   id        Int     @default(autoincrement()) @id
@@ -20,11 +20,12 @@
   accountId  String?   @default("N/A")
   id       Int     @default(autoincrement()) @id
   uuid     String  @default(uuid())
   accessToken    String?  @default(uuid())
-  email    String  @unique
+  email    String
   emailVerified  Boolean @default(false)
-  username String?  @unique
+  accountAndEmail String? @unique
+  username String? @default("")
   password String  @default("")
   name     String? @default("")
   phone    String? @default("")
   phoneVerified  Boolean @default(false)
```


